# Работа с XML

**Цель работы:** научиться создавать и использовать стандартные диалоги, читать содержимое XML-файлов

## БД студентов

В данной работе мы создаем небольшую БД студентов с данными по успеваемости. Формат файла для хранения - XML. Ниже приведен пример файла с записью по одному студенту:

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<students>
  <stud id="001" name="Пупкин В.В." group="2018-ABC">
    <marks>
      <mark value="4"></mark>
      <mark value="5"></mark>
      <mark value="5"></mark>
      <mark value="3"></mark>
    </marks>
  </stud>
</students>
```

В реальном xml-файле таких записей должно быть не менее 10.

Для чтения и анализа данных необходимо разработать приложение. На главной форме нужно поместить кнопку открытия файла БД.


Ниже приводится пример диалога для открытия xml-файлов:
```
OpenFileDialog dlg = new OpenFileDialog();
            dlg.Filter = "Files XML (*.xml)|*.xml";
            if (dlg.ShowDialog() != DialogResult.OK)
                return;

string filename = dlg.FileName;
```

После того, как пользователь выберет нужный файл, его имя заносится в переменную `filename`.

## Представление данных в программе

В программе создается класс **Student** для хранения информации об одном студенте. Пример класса:

```
public struct Student
    {
        public string name;  // ФИО
        public int id;       // номер зачетки
        public string group; // название группы
        public List<int> marks;  // список оценок 2-5
    }
```

Для хранения информации о всех студентов используется список:

```
List<Student> students;
```

## Парсинг xml-файла

Для парсинга xml-файла предлагается использовать в качестве примера следующий код:

```
          try
            {
                XmlTextReader reader = new XmlTextReader(filename);
                Student st;
                reader.WhitespaceHandling = WhitespaceHandling.None;
                bool mstart = false;
                while (reader.Read())
                {
                    if (reader.NodeType == XmlNodeType.Element)                        
                    {
                        if (reader.Name == "stud")
                        {
                            st = new Student();
                            st.marks = new List<int>();
                            st.name = reader.GetAttribute("name");
                            st.id = Convert.ToInt32(reader.GetAttribute("id"));
                            st.group = reader.GetAttribute("group");                                                        
                        }
                        else if (reader.Name == "marks")
                        {
                            mstart = true;
                        }
                        else if (reader.Name == "mark" && mstart)
                        {
                            st.marks.Add(Convert.ToInt32(reader.GetAttribute("value")));
                        }
                    }
                    else if (reader.NodeType == XmlNodeType.EndElement)
                    {
                        if (reader.Name == "marks")
                        {
                            students.Add(st);
                            mstart = false;
                        }
                    }
                }
            }
            catch (Exception ex)
            {
                MessageBox.Show("Ошибка: " + ex.Message);
            }
```

## Задача

Необходимо написать приложение, которое читает xml-файл, загружат данные и показывает их в табличном представлении, а также вычисляет средний балл по всем студентам и по всем группам (групп может быть несколько).

## Результаты работы

Результаты работы в виде файлов проекта (кроме исполняемых, находящихся в папке `Debug` или `Release`) прислать в пул-запросе (в папке `App`) для своей ветки. Сделать скриншот главного окна приложения Windows Forms и поместить файл в папку `src`.

## Алгоритм выполнения работы

Для выполнения работы необходимо:

1. Выполнить *fork* репозитария в свой аккаунт.
1. Выполнить клонирование репозитария из своего аккаунта к себе на локальную машину (`git clone`).
1. Создать ветку **git** с индивидуальным номером (`git branch имя_ветки`).
1. Сделать ветку активной (`git checkout имя`).
1. Необходимо разместить исходные файлы с решениями задач, поместив **.h, .cpp, .cs** в подкаталоге **src** репозитория и скриншот главного окна приложения.
1. Добавить файлы в хранилище (`git add`).
1. Выполнить фиксацию изменений (`git commit -m "комментарий"`).
1. Отправить содержимое ветки в свой удаленный репозиторий (`git push origin имя_ветки`).
1. Создать пул-запрос в репозиторий группы и ждать результата 


|  ФИО              | Имя ветки |
|-------------------|-----------|
| Афанасьев А.     | b1 |
| Воронов Д.    | b2 |
| Баландин А.    | b3 |
| Бритова Ю.|  b4 |
| Голованов Д.         | b5  |
| Головин Д.        | b6 |
| Гордеев В.       | b7 |
| Дукова Е.     | b8 |
| Комаров Д.       | b9 |
| Кузминский И.     | b10 |
| Кузьмин А.          | b11 |
| Кулаков Р.  | b12  |
| Майоров Н.     | b13 |
| Матвеев С.        | b14 |
| Мизгирев А.            | b15 |
| Мишанина П. | b16 |
| Новикова В.     | b17 |
| Орлов А.      | b18 |
| Слащева Я. | b19 |
| Сорокин А. | b20 |

